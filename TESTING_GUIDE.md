# 动画功能测试指南

## 编译和运行

1. **编译项目**
   ```bash
   ./gradlew assembleDebug
   ```

2. **安装到设备**
   ```bash
   adb install app/build/outputs/apk/debug/app-debug.apk
   ```

3. **启动应用**
   - 通过系统广播启动：
     ```bash
     adb shell am broadcast -a com.android.systemui.recents.ACTION_SHOW
     ```

## 功能测试

### 1. 基本动画测试

**测试步骤：**
1. 打开最近任务界面
2. 在任务卡片上向上滑动（距离较短）
3. 观察卡片是否平滑返回原位

**预期结果：**
- 滑动过程中卡片跟随手指移动
- 透明度和大小有轻微变化
- 松手后平滑返回原位

### 2. 删除动画测试

**测试步骤：**
1. 在任务卡片上快速向上滑动
2. 或者向上滑动超过卡片高度的30%

**预期结果：**
- 卡片向上滑出屏幕
- 伴随透明度渐变和缩放效果
- 任务从列表中移除
- 动画流畅，无卡顿

### 3. 边界情况测试

**测试场景：**
1. **快速连续滑动**: 快速在多个卡片上滑动
2. **中断滑动**: 滑动过程中突然停止或改变方向
3. **边缘滑动**: 在卡片边缘进行滑动操作
4. **水平滑动**: 尝试水平滑动，应该不触发删除

**预期结果：**
- 不会出现动画冲突
- 状态正确重置
- 不会误触发删除

### 4. 性能测试

**测试内容：**
1. **动画流畅性**: 60fps的动画效果
2. **内存使用**: 无内存泄漏
3. **响应性**: 触摸响应及时

## 调试信息

### 日志标签
- `TaskView`: 任务视图相关日志
- `newland`: 主要功能日志

### 关键日志
```
D/TaskView: Swipe started
D/TaskView: Successfully loaded thumbnail for task [id]
```

## 常见问题

### 1. 动画不流畅
- 检查设备性能
- 确认开发者选项中动画缩放设置

### 2. 删除不生效
- 确认应用有系统权限
- 检查滑动距离和速度是否达到阈值

### 3. 触摸冲突
- 确认ViewPager的触摸事件处理
- 检查手势检测器的返回值

## 性能监控

### 使用工具
1. **GPU呈现模式分析**: 检查动画帧率
2. **内存分析器**: 监控内存使用
3. **CPU分析器**: 检查CPU占用

### 关键指标
- 动画帧率: >55fps
- 内存增长: 无明显泄漏
- CPU使用: 动画期间<30%

## 兼容性测试

### 测试设备
- 不同屏幕尺寸
- 不同Android版本
- 不同性能等级

### 测试场景
- 横屏/竖屏切换
- 多任务切换
- 低内存情况